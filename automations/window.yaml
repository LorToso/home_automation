- id: 'living_room_window_protect_open'
  alias: 'Living Room Window Protect Open'
  description: ''
  trigger:
  - platform: state
    entity_id: switch.living_room_window_open
    to: 'on'
  condition:
    - condition: state
      entity_id: switch.living_room_window_close
      state: 'on'
  action:
    - service: switch.turn_off
      target:
        entity_id:
          - switch.living_room_window_open
          - switch.living_room_window_close
    - service: notify.telegram
      data:
        message: Error trying to close the window
        title: Window Error

- id: 'living_room_window_protect_close'
  alias: 'Living Room Window Protect Close'
  description: ''
  trigger:
    - platform: state
      entity_id: switch.living_room_window_close
      to: 'on'
  condition:
    - condition: state
      entity_id: switch.living_room_window_open
      state: 'on'
  action:
    - service: switch.turn_off
      target:
        entity_id:
          - switch.living_room_window_open
          - switch.living_room_window_close

    - service: notify.telegram
      data:
        message: Error trying to close the window
        title: Window Error

- id: 'living_room_window_open_on_too_long'
  alias: 'Living Room Window Open On Too Long'
  description: ''
  trigger:
    - platform: state
      entity_id: switch.living_room_window_open
      to: 'on'
      for: 00:01:00
  condition: []
  action:
    - service: switch.turn_off
      target:
        entity_id:
          - switch.living_room_window_open
          - switch.living_room_window_close
    - service: notify.telegram
      data:
        message: Error trying to open the window
        title: Window Error

- id: 'living_room_window_close_on_too_long'
  alias: 'Living Room Window Close On Too Long'
  description: ''
  trigger:
    - platform: state
      entity_id: switch.living_room_window_close
      to: 'on'
      for: 00:01:00
  condition: []
  action:
    - service: switch.turn_off
      target:
        entity_id:
          - switch.living_room_window_open
          - switch.living_room_window_close
    - service: notify.telegram
      data:
        message: Error trying to close the window
        title: Window Error

- id: 'track_living_room_window_on'
  alias: 'Track Living Room Window On'
  description: ''
  trigger:
    - platform: state
      entity_id: switch.living_room_window_close
      to: 'on'
      for: 00:00:10
  condition: []
  action:
    - service: input_boolean.turn_off
      target:
        entity_id: input_boolean.living_room_window_open

- id: 'track_living_room_window_off'
  alias: 'Track Living Room Window Off'
  description: ''
  trigger:
    - platform: state
      entity_id: switch.living_room_window_open
      to: 'on'
      for: 00:00:10
  condition: []
  action:
    - service: input_boolean.turn_on
      target:
        entity_id: input_boolean.living_room_window_open


- id: 'monitor_living_room_window_overheating'
  alias: 'Track Living Room Window Overheating'
  description: ''
  trigger:
    - platform: state
      entity_id: binary_sensor.living_room_window_overheating
      to: 'on'
    - platform: state
      entity_id: binary_sensor.living_room_window_close_overpowering
      to: 'on'
    - platform: state
      entity_id: binary_sensor.living_room_window_open_overpowering
      to: 'on'
  condition: []
  action:
    - service: notify.telegram
      data:
        message: Error window overheating/overcharging
        title: Window Error
